# SPI

面向对象设计鼓励模块间基于接口而非具体实现编程，以降低模块间的耦合，遵循依赖倒置原则，并支持开闭原则（对扩展开放，对修改封闭）。然而，直接依赖具体实现会导致在替换实现时需要修改代码，违背了开闭原则。为了解决这个问题，SPI随之出现，它提供了一种服务发现机制，允许在程序外部动态指定具体实现。这与控制反转（IoC）的思想类似，将组件装配的控制权移交给了程序之外。

SPI机制也解决了Java类加载体系中双亲委派模型带来的限制。双亲委派模型虽然保证了核心库的安全性和一致性，但也限制了核心库或扩展库加载应用程序类路径上的类（通常由第三方实现）。SPI允许核心或扩展库定义服务接口，第三方开发者提供并部署实现，SPI服务加载机制则在运行时动态发现并加载这些实现。例如，JDBC4.0及之后的版本利用SPI自动发现和加载数据库驱动，开发者只需要将驱动JAR包放置在类路径下即可，无需使用`Class.forName()`显式加载驱动类。